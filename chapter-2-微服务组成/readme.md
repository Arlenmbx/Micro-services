### 随着项目的扩大单体应用会在哪些方面遇到问题？
  * 团队协作效率低下：一个 feature 的发布依赖各个分支的合并，一个分支引入了问题便会影响整个功能的发布；
  * 部署成本高：测试、编译需一起打包执行，周期性较长；
  * 线上发布慢：一旦代码膨胀，发布周期也会变长，独立部署并行执行可以提高效率；
  * 可用性差：配置的变更出错、内存泄漏、bug的产生会导致整个项目不可用；
  
### 如何进行服务化？
 将单体应用内的本地调用改成远程 RPC 调用，各个模块之间约定好接口
 
### 微服务的几个特点：

  * 细粒度拆分：尽量做到功能独立，在做到没有资源依赖的情况下尽可能将各个功能细粒度拆分；
  * 独立运维：各个模块可以有负责人独立负责，独立开发、测试、部署和运维；各个模块可以遵守独立打包部署原则；
  * 服务治理：模块拆分成多个后，如果做到监控、问题追踪等问题；
  
### 单体应用拆分的两个方式？
  * 横向拆分
  * 纵向拆分
  
  上面两种拆分官方的解释是纵向拆分是按照依赖程度进行拆分，有依赖关系的进行部署成一个模块，避免数据库的拆分，无依赖关联的独立一个模块；而横向拆分是按照功能进行拆分，尽量将功能独立的拆分为一个模块；
  
  我感觉这种解释横向纵向只是从两个不同的维度进行分析，一个是依赖维度，一个是功能独立维度，但是感觉是一种表述，不像 scale 的横向和纵向一个是增加机器，一个是增加机器的内存、cpu 等，区别比较明显；
  
  所以对两者区别理解程度不是很深，没联想到工作中的相关场景；
  
### 服务拆分的条件
  * 接口的定义： 单体应用中都是以类库的形式区分各个模块，调用之间也是通过 `类.方法` 的形式进行调用，如 c++/java 按照功能不能定义不同的类，类之间通过 UML 生成类图进行描述；但微服务各个模块需要远程调用，我们需定义好协议、接口名、参数、返回值等信息；
  * 服务的发布与订阅：也就是消费者如何获得提供者的信息（地址），之间在本地搭建过一套 kafka，需要用到zookeeper去协调这种关系，服务提供者向注册中心发布自己的配置信息，消费者通过监听可以或者服务地址并发送请求，类似与 dns 的原理，主要应用如 etcd、zookeeper；
  * 服务监控：包括数据的收集、处理和展示，比如阿里云的sls，可以通过主动推送日志或 logtail 进行收集，之后通过 sql 进行处理，或者相关的指标，如latency、status等，最后通过 dashboard 进行展示；
  * 故障定位：可以在服务入口生成一个 requestid，并不断传递下去，最后通过这个 requestid 可以将一个请求经过的所有链路串联起来；
  * 服务治理：模块之间有依赖，如果保证一个模块出问题不影响其他模块，比如熔断、限流等措施；
  

### 微服务组件
  * 服务描述：
    * restful api：http
    * xml： pox.xml  
    * idl文件： protobuf、thrift
  * 注册中心：也就是上面服务发布与订阅，保证消费者也可以得到服务的地址，并可以及时监听到服务地址的变化状态
    * 其中服务注册和消费者监听都属于 init 操作, 消费者向服务发送的 invoke 请求同步/异步均可，monitor模块属于 async
  * 服务框架：
    * 通信协议： tcp/udp
    * 数据传输方式：同步/异步
    * 传输格式：json/pb序列化
  * 服务监控：同上
  * 服务追踪：同故障定位
  * 服务治理   